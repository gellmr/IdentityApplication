@model gellmvc.Domain.Entities.Order

@{
  var showImages = (bool)ViewData["showImages"];
  var headerColStyle = (showImages) ? "col-xs-8" : "col-xs-12";
}

<div class="row tiny-font">
  <div class="@headerColStyle">

    <p>
      <strong>Order #</strong>@Model.Id
      &nbsp
      <strong>Created:</strong>
      @Model.OrderDate.ToString("dd MMMM yyyy hh:mm tt")
    </p>

    <small>
      <p>
        <strong>Shipping Address:</strong>
        @if (Model.ShippingAddress == null) {
          @:"None"
        } else {
          @Model.ShippingAddress.OneLine()
        }
      </p>

      <p>
        <strong>Billing Address:</strong>
        @if (Model.BillingAddress == null)
        {
          @:"None"
        }
        else
        {
          @Model.BillingAddress.OneLine()
        }
      </p>

      <p>
        <strong>Product Lines:</strong> @Model.ProductLinesCount()
        &nbsp
        <strong>Total Items:</strong> @Model.GetTotalItems()
        &nbsp
        <strong>Invoice Total:</strong> $@Model.GrandTotal()
      </p>
    </small>

    <p>
      <strong>Status:</strong>
      <small>@Model.OrderStatus</small>
    </p>

  </div>

  @{if (showImages == true){

    <div class="col-xs-4">
    @for (int i = 0; i < Model.OrderedProducts.Count(); i++)
    {
      var op = Model.OrderedProducts.ElementAt(i);

      <!-- Image tag, always visible -->
      <div class="col-xs-12 col-sm-3 dbug-always-visible">
      @{
        string imgFolder = gellmvc.Helpers.ApplicationHelper.ProductImagesFolder();
      }
      <img src="@imgFolder/@op.Product.ImageUrl" alt="@imgFolder/@op.Product.ImageUrl" class="img-rounded img-responsive centered-block-img with-vert-margins" style="max-width: 40px;" />
      </div>
    }
    </div>

  }}

</div>